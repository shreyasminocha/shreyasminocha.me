<figure {{ with .Get "class" }}class="{{.}}"{{ end }}>
    {{ with .Get "link"}}<a href="{{.}}">{{ end }}
        <img src="{{ .Get "src" }}" {{ if or (.Get "alt") (.Get "caption") }}alt="{{ with .Get "alt"}}{{.}}{{else}}{{ .Get "caption" }}{{ end }}"{{ end }} {{ if .Get "alt" }}title="{{.Get "alt" }}"{{ end }}/>

    {{ if or (.Get "caption") (.Get "attr")}}
    <figcaption>
        {{ if .Get "caption" }}
        <p>{{ .Get "caption" | markdownify }}</p>
        {{ end }}

        {{ if .Get "attr" }}
        <p>
            <small class="attribution">
                Source:
                {{ if .Get "attrlink"}}
                {{ with .Get "attrlink"}}<a href="{{.}}" rel="nofollow noreferrer"> {{ end }}
                {{ .Get "attr" | markdownify }}
                {{ else }}
                {{ .Get "attr" | markdownify }}
                {{ end }}
            </small>
            </p>
        {{ end }}
    </figcaption>
    {{ end }}
</figure>
